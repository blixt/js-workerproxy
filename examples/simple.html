<!DOCTYPE html>
<html>
	<head><title>Worker Proxy example</title></head>
	<body>
		<script src="../index.js"></script>
		<script>
			var worker = new Worker('worker.js');

			// The list of function names is not necessary
			// if Proxy is supported.
			var api = createWorkerProxy(worker, {functionNames: [
				'addToFirstIndexInBuffer',
				'greet'
			]});

			api.greet('World', function (err, message) {
				var p = document.createElement('p');
				p.textContent = message;
				document.body.appendChild(p);
			});

			var buffer = new ArrayBuffer(100);
			api.addToFirstIndexInBuffer.transfer([buffer], buffer, 10, function (err, buffer) {
				var array = new Uint8Array(buffer);
				console.log('Got buffer back:', array[0]);
			});
		</script>
	</body>
</html>
